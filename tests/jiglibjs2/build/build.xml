<?xml version="1.0" encoding="UTF-8"?>
<project name="YUICompression" basedir="../">
	<target name="default" description="YUICompresses, makes a concatenated version and outputs JSDoc documentation">
		
		<!-- YUICompress -->
		
		<delete dir="${basedir}/build/output/code" />
		<mkdir dir="${basedir}/build/output/code" />
		
		<taskdef name="yuicompress"
			classname="com.yahoo.platform.yui.compressor.YUICompressTask">
			<classpath>
				<pathelement path="${basedir}/build/tasks/YUICompress/yuicompressor-2.4.8pre.jar" />
				<pathelement path="${basedir}/build/tasks/YUICompress/YUIAnt.jar" />
			</classpath>
		</taskdef>
		<yuicompress linebreak="16000" warn="false" munge="yes"
			preserveallsemicolons="true" outputfolder="${basedir}/build/output/code/">
			<fileset dir="${basedir}">
				<exclude name="build/**" />
				<exclude name="test/**" />
				<exclude name="official_demos/**" />
				<include name="**/*.js" />
				<!--include name="**/*.css" / -->
			</fileset>
		</yuicompress>
		
		<!-- Concatenated versions -->
					
		<delete file="${basedir}/build/output/jiglib2.all.min.js" />
			
		<concat destfile="${basedir}/build/output/jiglib2.all.min.js">
			<filelist dir="${basedir}/build/output/code" files="jiglib.js" />
			<filelist dir="${basedir}/build/output/code/geom" files="glMatrix.js,Vector3d.js,Matrix3d.js" />
			<filelist dir="${basedir}/build/output/code/math" files="JMatrix3d.js,JMaths3d.js,JNumber3d.js" />
			<fileset dir="${basedir}/build/output/code/cof" includes="*.js" />
			<fileset dir="${basedir}/build/output/code/data" files="CollOutData.js,ContactData.js,PlaneData.js,EdgeData.js,TerrainData.js" />
			<fileset dir="${basedir}/build/output/code/geometry" files="JAABox.js" />
			<fileset dir="${basedir}/build/output/code/data" files="OctreeCell.js,CollOutBodyData.js,TriangleVertexIndices.js,SpanData.js" />
			<fileset dir="${basedir}/build/output/code/physics/constraint" includes="*.js" />
			<fileset dir="${basedir}/build/output/code/physics" files="MaterialProperties.js" />
			<fileset dir="${basedir}/build/output/code/geometry" files="JTriangle.js,JSegment.js" />
			<fileset dir="${basedir}/build/output/code/collision" includes="*.js" />
			<fileset dir="${basedir}/build/output/code/geometry" files="JOctree.js,JRay.js" />
			<fileset dir="${basedir}/build/output/code/events" includes="*.js" />
			<fileset dir="${basedir}/build/output/code/physics" includes="*.js" excludes="MaterialProperties.js" />
			<fileset dir="${basedir}/build/output/code/geometry" files="JSphere.js,JTriangleMesh.js,JPlane.js,JTerrain.js,JBox.js,JCapsule.js" />
			<fileset dir="${basedir}/build/output/code/vehicles" includes="*.js" />
		</concat>
		
	</target>
</project>