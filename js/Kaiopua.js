var KAIOPUA=function(c){function l(a){b.signals.mousedown.dispatch(a);a.preventDefault();a.stopPropagation();return!1}function m(a){b.signals.mouseup.dispatch(a);a.preventDefault();a.stopPropagation();return!1}function n(a){b.mouse.x=a.clientX;b.mouse.y=a.clientY;b.signals.mousemoved.dispatch(a);a.preventDefault();a.stopPropagation();return!1}function o(a){b.signals.mousewheel.dispatch(a);a.preventDefault();a.stopPropagation();return!1}function g(a){var c,d,e,f;!a.gamma&&!a.beta?(a.gamma=-(a.x*(180/
Math.PI)),a.beta=-(a.y*(180/Math.PI))):a.alpha===null&&a.beta===null&&a.gamma===null&&($(window).unbind("deviceorientation",g),$(window).unbind("MozOrientation",g));d=(c=Math.abs(a.gamma)>4||Math.abs(a.beta)>4)?a.gamma:0;c=c?a.beta:0;if(lastGamma!==d||lastBeta!==c)return e=Math.round(1.5*d)+b.mouse.x,f=-Math.round(1.5*c)+b.mouse.y,Math.abs(e)>window.innerWidth&&(e=e<0?-window.innerWidth:window.innerWidth),Math.abs(f)>window.innerHeight&&(f=f<0?-window.innerHeight:window.innerHeight),a.mouse.x=e,a.mouse.y=
f,lastGamma=d,lastBeta=c,b.signals.mousemoved.dispatch(a),a.preventDefault(),a.stopPropagation(),!1}function p(a){b.signals.keydown.dispatch(a)}function q(a){b.signals.keyup.dispatch(a)}function i(a){b.screenWidth=$(window).width();b.screenHeight=$(window).height();b.signals.windowresized.dispatch(b.screenWidth,b.screenHeight);typeof a!=="undefined"&&(a.preventDefault(),a.stopPropagation());return!1}function j(a,b,d){typeof c.game!=="undefined"&&c.game.pause();typeof c.dev!=="undefined"&&dev.log_error(a,
b,d)}var b=c.shared=c.shared||{},h,k;$LAB.script(["js/lib/jquery-1.6.4.min.js","js/lib/RequestAnimationFrame.js","js/lib/signals.min.js"]).wait(function(){b.mouse={x:0,y:0};b.screenWidth=$(window).width();b.screenHeight=$(window).height();b.originLink=window.location.pathname.toString();b.frameRateMax=60;b.frameRateMin=20;b.refreshInterval=1E3/60;b.html={staticMenu:$("#static_menu"),gameContainer:$("#game"),errorContainer:$("#error_container"),transitioner:$("#transitioner")};b.signals={mousedown:new signals.Signal,
mouseup:new signals.Signal,mousemoved:new signals.Signal,mousewheel:new signals.Signal,keydown:new signals.Signal,keyup:new signals.Signal,windowresized:new signals.Signal,loadItemCompleted:new signals.Signal,loadListCompleted:new signals.Signal,loadAllCompleted:new signals.Signal,error:new signals.Signal};$(document).bind("mousedown",l);$(document).bind("mouseup",m);$(document).bind("mousemove",n);$(document).bind("mousewheel",o);$(document).bind("keydown",p);$(document).bind("keyup",q);$(window).bind("deviceorientation",
g);$(window).bind("MozOrientation",g);$(window).bind("resize",i);window.onerror=j;b.signals.error.add(j);i()}).script(["js/utils/Dev.js","js/utils/Error.js","js/utils/Loader.js","js/game/Game.js"]).wait(function(){h=c.error;k=c.game;h=c.error;h.check()?h.process():k.init()});return c}(KAIOPUA||{});
