var KAIOPUA=function(d){function E(a){var b=a.material,c=x*0.5;b.opacity+=(c+Math.random()*c)*a.targetOpacityDir;if(a.targetOpacity===0&&b.opacity<=a.targetOpacity)a.targetOpacityDir=1,a.targetOpacity=f,r.splice(a.activeIndex,1),l[l.length]=a;else{if(a.targetOpacity===f&&b.opacity>=a.targetOpacity)a.targetOpacityDir=-1,a.targetOpacity=0;window.requestAnimationFrame(function(){E(a)})}}d.shared=d.shared||{};var b=d.game=d.game||{},b=b.sections=b.sections||{},b=b.launcher=b.launcher||{},b=b.water=b.water||
{},g,F,y,s=5413585,t=1E4,n=50,k=50,G,o=0,z=0.001,e=200,u=4,H=[],h=35,m=-Math.min(e*0.5,h),p=Math.min(e*0.5,h),I=(p-m)*0.01,J,L=5*(Math.PI/180),M=Math.PI*1.5,l=[],r=[],K,A=20,B=700,q=2E3,v=q*0.5,C=-Math.PI*0.1,D=0.001,f=0.6,x=0.02,w;b.init=function(a){var b,c,d,a=a||{};s=a.wavesColor||s;t=a.wavesSize||t;n=a.wavesVertsW||n;k=a.wavesVertsH||k;z=a.wavesSpeed||z;e=a.wavesAmplitude||e;h=a.vvAbs||h;m=-Math.min(e*0.5,h);p=Math.min(e*0.5,h);I=(p-m)*0.01;J=e*1.5;u=a.wavesFrequency||u;A=a.numRays||A;B=a.rayWidth||
B;q=a.rayHeight||q;v=a.rayHeightVariation||v;C=a.lightAngle||C;D=a.rayShowChance||D;f=a.rayOpacityOn||f;x=a.rayOpacityDelta||x;w=new THREE.Object3D;g=new THREE.PlaneGeometry(t,t,n-1,k-1);g.dynamic=!0;G=g.vertices.length;for(a=0;a<G;a+=1)H[a]={amplitude:Math.random()*(p-m)+m,dir:1,dirSwitch:Math.round(Math.random()*300+300),dirSwitchCount:Math.round(Math.random()*300+300)};F=new THREE.MeshLambertMaterial({color:s});y=new THREE.Mesh(g,F);y.doubleSided=!0;w.addChild(y);c=new THREE.PlaneGeometry(B,q+
(Math.random()*v-v*0.5));K=THREE.ImageUtils.loadTexture("assets/textures/light_ray.png");for(a=0;a<A;a+=1)d=new THREE.MeshLambertMaterial({color:s,map:K,opacity:0,depthTest:!1}),b=new THREE.Mesh(c,d),b.rotation.set(Math.PI*0.5-C,-Math.PI*0.5,0),l[l.length]={ray:b,material:d,targetOpacity:f,targetOpacityDir:1},w.addChild(b)};b.waves=function(a){var b=g.vertices,c,d=n-1,h=k-1,f,i,j;o=a*z;for(i=0;i<n;i+=1)for(j=0;j<k;j+=1){a=b[i+j*k];a.position.z=e*(Math.cos(i/u+o)+Math.sin(j/u+o));if(i!==0&&i!==d&&
j!==0&&j!==h){c=H[i+j*k];c.amplitude=Math.min(p,Math.max(m,c.amplitude+I*c.dir));if(c.dirSwitch>c.dirSwitchCount)c.dir=-c.dir,c.dirSwitch=0;c.dirSwitch+=1;a.position.z+=c.amplitude}if(a.position.z<-e&&l.length>0&&Math.random()<=D)c=l.pop(),f=c.ray,f.position.set(a.position.x,a.position.y,-(a.position.z+q*0.5+e)),c.activeIndex=r.length,r[r.length]=c,E(c)}g.computeFaceNormals();g.computeVertexNormals();g.__dirtyVertices=!0};b.get_environment=function(){return w};b.bob=function(a){a.position.y=Math.sin(o)*
J;a.rotation.x=Math.sin(o+M)*L};return d}(KAIOPUA||{});
